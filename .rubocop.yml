AllCops:
  TargetRubyVersion: 2.6
  TargetRailsVersion: 6.0

  DisplayCopNames: true
  DisplayStyleGuide: false

  Exclude:
    # Files that are out of our control and that are not excluded in the
    # default config of rubocop.
    - db/schema.rb
    - db/schema.mysql.rb
    - db/schema.postgresql.rb
    - db/migrate/*
    - vendor/**/*
    - node_modules/**/*

##
# Plugins

require:
  - rubocop-rails

#
# Layout
#

# This is a remnant of old SUSE-style alignment for hashes, The table format
# looks more human readable.
Layout/HashAlignment:
  EnforcedHashRocketStyle: table
  EnforcedColonStyle: table

# The default is just too small. A limit of 100 looks reasonable and many other
# projects (including inside of SUSE) are also using this value.
Layout/LineLength:
  Max: 100

#
# Metrics
#

# The default is just too small.
Metrics/AbcSize:
  Max: 30

# We will skip it for tests, the Grape API and Rake tasks.
Metrics/BlockLength:
  Exclude:
    - spec/**/*
    - lib/api/**/*
    - lib/tasks/**/*

# Some classes (e.g. API) are either too difficult to modularize in a reasonable
# (readable) manner, or are intentionally fat (e.g. some models). Let's leave
# out these kinds of classes from this cop.
Metrics/ClassLength:
  Exclude:
    - app/models/**/*
    - lib/api/**/*

# NOTE: this could be further trimmed down but some refactorings will have to be
# done.
Metrics/MethodLength:
  Max: 20

#
# Rails
#

Rails/SkipsModelValidations:
  Enabled: false

#
# Style
#

# It's not needed to add documentation for obvious modules or classes. The main
# idea is that documentation will be asked during the review process if needed.
Style/Documentation:
  Enabled: false

# This forces us to create a new object for no real reason.
Style/MultipleComparison:
  Enabled: false

# There are some false positives (e.g. "module ::Module", in which we want to
# make sure there are no clashes or misunderstandings). Therefore, we just
# disable this cop.
Style/ClassAndModuleChildren:
  Enabled: false

#
# Naming
#

# The default minimum length is 3, which is too long for good names like
# "js". Variables with only one letter are usually disallowed, but there are
# some names which are easy to understand (e.g. convention).
Naming/MethodParameterName:
  MinNameLength: 2
  AllowedNames: [_, n]

##
# Newly added stuff.

Style/HashEachMethods:
  Enabled: true

Style/HashTransformKeys:
  Enabled: true

Style/HashTransformValues:
  Enabled: true
